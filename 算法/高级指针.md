# 高级：指针

## 多级指针

### 简介

> **指针**，是一个可以**存储**变量**地址**的变量。因为它本身就是一种变量，**指针也有自己的地址**。二级指针，即**指向指针的指针**，储存了指针的地址。

![image-20240728185525577](https://picgo-1301260628.cos.ap-guangzhou.myqcloud.com/image-20240728185525577.png)

![image-20240728185538260](https://picgo-1301260628.cos.ap-guangzhou.myqcloud.com/image-20240728185538260.png)

### 代码演示

```cpp
#include <bits/stdc++.h>
using namespace std;

int main()
{
    int a = 20;
    int *p = &a;
    int **pp = &p;
    int ***ppp = &pp;

    return 0;
}
```

可以得到结论：

```cpp
*pp == p;
**pp == *p;
**pp == a;
```

## 指针数组

### 简介

> 指针数组是**数组**，数组指针是**指针**，不要搞混了。指针数组，即**存放指针的数组**。

### 代码实现

此处先访问数组的**第一个指针指向的地址**

```cpp
#include <stdio.h>

int main()
{
    int a,b,c;
    int *arr[3] = {&a,&b,&c};

    // visit
    *arr[0] = 999;// []优先级更高

    printf("%d", a);
}
```

同时，可以用二级指针得到指针数组的首元素的地址

```cpp
int *p[3];
int **pp = p;// 使用指针的指针，来指向数组的第一个指针
```

可以类比一级指针

```cpp
int arr2[3];
int *p2 = arr2;
```

## 数组指针

### 简介

> 本质是个**指针**，是一个指向**整个数组**的指针

### 代码

```cpp
int *p;  // 指向int类型的指针
```

数组指针表示指向整个数组

```cpp
int (*p)[3] = &arr;  // 注意[]的优先级更高
```

数组指针的目标是**整个数组**，不是普通指针指向数组的首元素

```cpp
int arr[3] = {111,222,333};
int (*p)[3] = &arr;
```

此处是定义了一个指针，让其指向整个数组，即对整个数组再取了一次地址。虽然和普通指针一样是指向首元素的地址，但是意义不同。



数组指针的访问

```cpp
#include <stdio.h>

int main()
{
    int arr[3] = {111, 222, 333};
    int(*p)[3] = &arr;

    printf("%d %d  %d", *(*p + 0), *(*p + 1), *(*p + 2));
    return 0;
}
```

- p 表示整个数组的地址
- *p 代表其指向数组的首元素的地址
- *p+i 代表所指向数组中第i个元素的地址（ *p 表示指向首个元素的指针）
- *( *p+i) ，即对应地址上的值


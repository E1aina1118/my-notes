# 记录一次博客的诞生

## 前言

> ​	作为一名工科的学生，记录自己的学习过程是一个好习惯。一直以来想要在电脑上完成一些效果的时候，常常时刻抱着一个搜索引擎，显然效率是蛮低的，简而言之，如果能有一个自己的博客，便能将很多知识记在脑中，查阅的时候比起搜索引擎，也可以更好地进行检索、分享。

​	所以，就有了这个博客……尽管不是很完善，但也能用吧。

## 搭建历程

### 整体思路

<!--more-->

​	工具/框架：**软路由，docker，Typecho，Picgo**

​	然后还去白嫖了腾讯云的**COS**

#### 我咋突然有个软路由	

​	莫名其妙的运气，我们家莫名其妙有公网ip，于是我特别希望有一台软路由，来进行ddns解析，实现外网的访问。一开始是将家里的电脑时时刻刻运行着DDNS-GO服务，但是此服务在普通家用电脑上运行，还是不够稳定，总是会出现域名无法更新的情况。更何况，一台电脑日夜不停地运行，电费也是很吓人的。所以，就购置了一台软路由，运行稳定且功耗低，可以部署一些云服务，包括这个博客。

#### 框架的选择

​	其实这已经是我不止一次想要搭建一个博客了。第一次使用的框架是wordpress，实际效果可以说是没法用，大多数功能我并不需要，因为不会优化，运行速度也很慢，当时还没有软路由，嫌机箱风扇太吵就把它关了再也没打开。这次借鉴朋友的博客，采用了typecho。



## 流程梗概

**教程参考**:[Linux下Docker搭建部署Typecho博客【详细版】_docker typecho-CSDN博客](https://blog.csdn.net/qq_45740503/article/details/135897305)

- **首先**

  使用xshell连接软路由，提前安装好docker。这里软路由的系统是iStoreOS

![软路由xshell](https://picgo-1301260628.cos.ap-guangzhou.myqcloud.com/image-20240710001018711.png)

- **拉取镜像**

`docker pull 80x86/typecho`

- **运行**

`docker run -d --name=typecho --restart always -e PHP_TZ=Asia/Shanghai -e PHP_MAX_EXECUTION_TIME=600 -p 1118:80 80x86/typecho:latest`

​	第一个坑就掉在这里了，端口设置问题。原教程的方案是在租用云服务器进行搭建，80端口是可用的。而我所处的是家用网络环境，80端口是被封锁的。此时，我还是有意识地将端口改成别的，我改成了`1118:1118`，显然，并不能成功进入到typecho的安装界面。原来typecho在容器内默认就会监听`80`端口，所以在执行`docker run`命令时所设置的端口对容器本身内容**无效**（白忙活几个小时搜教程，泪）

​	正确的设置是，**宿主机端口:容器端口**。例如`1118:80`，此时容器内将会监听80端口，当外部信息进入请求1118端口时，docker将会把信息通过**桥**转发给容器的80端口，从而实现通信。

![docker桥](https://picgo-1301260628.cos.ap-guangzhou.myqcloud.com/image-20240710002830789.png)

![原理图](https://picgo-1301260628.cos.ap-guangzhou.myqcloud.com/image-20240710003754256.png)

> docker的桥，该容器的ip为172.17.0.3

- **进入安装**

​	使用80端口时，访问**宿主机ip/install.php**，其他端口时，访问**宿主机ip:端口/install.php**

​	安装页面：

![typecho安装页面](https://picgo-1301260628.cos.ap-guangzhou.myqcloud.com/image-20240710003254873.png)

​	根据引导进行安装，记住**用户名与密码！！**

- **成品展示**

![blog_home](https://picgo-1301260628.cos.ap-guangzhou.myqcloud.com/image-20240710003622321.png)

## 优化与使用

>  **markdown**是一个非常高效的语法，但是移植起来，可能出现图片遗失的情况。这次建站过程，首次了解到了**图床**的概念。

### 图床

​	**word文档**，在其中插入图片、文字、表格等一系列数据，保存后会打包成为一个word文档，**XXX.word**

​	ppt同理，图片、文字、动画效果，都会封装成一个**XXX.pptx**

​	但是，**markdown**，仅存储文本数据，图片由路径代替，可以是**绝对路径**、**相对路径**或者**url**的形式。体积小，利于即时展示。

> 使用typora编辑markdown:

![使用typora编辑md文档](https://picgo-1301260628.cos.ap-guangzhou.myqcloud.com/image-20240710004748983.png)

​	将图片保存至本地，会随着**.md文件**的移动而遗失，不便于流通、移植。

​	将图片寄存至第三方托管平台，有访问**速度慢**、平台**跑路**的风险。

​	使用url，只要有网络，即可轻松访问该图片，并且不会随着**.md文件**的移动而失去检索。图床就发挥着这种功能，将图片存储在云端，需要时即可访问。

> 引用：
>
> ![什么是图床](https://picgo-1301260628.cos.ap-guangzhou.myqcloud.com/image-20240710005405817.png)

​	因此我觉得自行搭建一个**图床**很重要，成本也蛮低的。

​	具体过程细节此处不再赘述。

### Typora配合Picgo

​	Typora，md文档的编辑器

​	Picgo，通过token，实现对图床的管理

​	![typora图像设置](https://picgo-1301260628.cos.ap-guangzhou.myqcloud.com/image-20240710005725474.png)

​	设置过后，即可实现当在**Typora**插入图片的时候，会自动将其通过**Picgo**同步到**图床**。我用的是**腾讯COS**作为图床。详细配置过程可以参考Picgo官方文档，或者之后写一个教程（画饼= =

## 总结

​	总之，这个博客就这样捣鼓出来了，有一些小bug，也不知道怎么去修。如果想做出真正满意的博客的话，估计就得系统学习一下网页设计了吧。搭建这个博客之前，我也曾写过一些**markdown笔记**，正准备进行移植(主要是先前的图片不好处理）。希望各位多多关注，大佬多多指点～(∠・ω< )⌒★。